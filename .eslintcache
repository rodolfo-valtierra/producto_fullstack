[{"D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\index.js":"1","D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\reportWebVitals.js":"2","D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\App\\App.js":"3","D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\App\\Button.jsx":"4","D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\App\\Map.jsx":"5","D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\Utils\\ApiUils.js":"6"},{"size":521,"mtime":1611938158175,"results":"7","hashOfConfig":"8"},{"size":375,"mtime":1611938158183,"results":"9","hashOfConfig":"8"},{"size":472,"mtime":1612135179941,"results":"10","hashOfConfig":"8"},{"size":626,"mtime":1611938158134,"results":"11","hashOfConfig":"8"},{"size":2860,"mtime":1612139156270,"results":"12","hashOfConfig":"8"},{"size":584,"mtime":1612162127710,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"p36nam",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25","usedDeprecatedRules":"16"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\index.js",[],["28","29"],"D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\reportWebVitals.js",[],"D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\App\\App.js",[],"D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\App\\Button.jsx",[],"D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\App\\Map.jsx",["30"],"import React, { useRef, useEffect } from 'react';\r\nimport * as L from 'leaflet';\r\nimport carto from '@carto/carto.js';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport PropTypes from 'prop-types';\r\nimport { getPoints } from '../Utils/ApiUils';\r\nimport './Map.css';\r\n\r\nfunction Map (props) {\r\n  const {\r\n    lat,\r\n    lng,\r\n    zoom,\r\n    basemapURL,\r\n    requestPoint,\r\n  } = props;\r\n\r\n  let username = '';\r\n  let apiKey = '';\r\n  let tableName = 'puntos';\r\n  if (process && process.env) {\r\n    if(process.env.REACT_APP_USERNAME) {\r\n      username = process.env.REACT_APP_USERNAME;\r\n    }\r\n    if(process.REACT_APP_API_KEY) {\r\n      apiKey = process.env.REACT_APP_API_KEY;\r\n    }\r\n    if(process.REACT_APP_TABLE_NAME) {\r\n      tableName = process.env.REACT_APP_TABLE_NAME;\r\n    }\r\n  }\r\n  \r\n  const map = useRef({});\r\n\r\n  requestPoint.current = async () => {\r\n    const pointsLayer = await createPointsLayer(username, apiKey, tableName);\r\n    const popup = L.popup({ closeButton: true });\r\n    pointsLayer.addTo(map.current);\r\n    \r\n    pointsLayer.eachLayer(point=> {\r\n      point.on('click', e => {\r\n        let htmlContent;\r\n        htmlContent = makeMarkupOnePoint(e.latlng.lat, e.latlng.lng, e.direction);\r\n        popup.setContent(htmlContent);\r\n        popup.setLatLng(e.latlng);\r\n        if (!popup.isOpen()) {\r\n          popup.openOn(map.current);\r\n        }\r\n      });\r\n    });\r\n  };\r\n  \r\n    \r\n  useEffect(() => {\r\n    map.current = L.map('map', {\r\n      center: [lat, lng],\r\n      zoom,\r\n      zoomControl: false\r\n    });\r\n    const basemap = L.tileLayer(basemapURL, {\r\n      detectRetina: true,\r\n      retina: '@2x',\r\n    });\r\n    basemap.addTo(map.current)\r\n\r\n  }, [\r\n    lat,\r\n    lng,\r\n    zoom,\r\n    basemapURL,\r\n  ]);\r\n  return (\r\n    <div id=\"map\"/>\r\n  );\r\n}\r\n    \r\nconst createPointsLayer = async (user, key, tableName) => {\r\n  let pointData;\r\n  await getPoints(user, key, tableName).then(data=>pointData = data);\r\n\r\n  const pointsArray = [];\r\n  pointData.forEach(p=>{\r\n    const circleMarker = L.circleMarker(p, {\r\n      color: '#3388ff'\r\n    }).setRadius(1);\r\n    pointsArray.push(circleMarker);\r\n  });\r\n\r\n  return L.layerGroup(pointsArray);\r\n};\r\n    \r\nfunction makeMarkupOnePoint(lat, lng, info = '') {\r\n  return `\r\n    <div class=\"widget\">\r\n    ${lat ? `\r\n    <h3>${lat}, ${lng}</h3>\r\n    `: ''}\r\n    ${info ? `\r\n    <h4>${info}</h4>\r\n    `: '<h4>No hay direcci√≥n</h4>'}\r\n    </div>\r\n  `;\r\n}\r\n    \r\n    \r\nMap.propTypes = {\r\n  basemapURL: PropTypes.string,\r\n  lat: PropTypes.number.isRequired,\r\n  lng: PropTypes.number.isRequired,\r\n  zoom: PropTypes.number,\r\n  requestPoint: PropTypes.shape({\r\n    current: PropTypes.func,\r\n  })\r\n};\r\nMap.defaultProps = {\r\n  zoom: 13,\r\n  basemapURL: 'https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png',\r\n  requestPoint: {\r\n    current: () => {},\r\n  }\r\n}\r\n    \r\nexport default Map;\r\n    \r\n","D:\\Users\\Rodolfo IVD\\Desktop\\Prueba CD Mx\\Prueba\\producto_fullstack\\src\\Utils\\ApiUils.js",[],{"ruleId":"31","replacedBy":"32"},{"ruleId":"33","replacedBy":"34"},{"ruleId":"35","severity":1,"message":"36","line":3,"column":8,"nodeType":"37","messageId":"38","endLine":3,"endColumn":13},"no-native-reassign",["39"],"no-negated-in-lhs",["40"],"no-unused-vars","'carto' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]